import React from 'react';
import BackArrow from './BackArrow';
import { useRecoilState } from 'recoil';
import { searchTermState, statsSwitchState } from '../recoil';

import { useSpring, animated } from 'react-spring';

import { useMediaQuery } from 'react-responsive';

const Header = ({ isBackArrow, isSearchBar }) => {
  const [statsSwitch, setStatsSwitch] = useRecoilState(statsSwitchState);
  const [searchTerm, setSearchTerm] = useRecoilState(searchTermState);

  const tablet760 = useMediaQuery({ query: '(max-width: 760px)' });
  const tablet630 = useMediaQuery({ query: '(max-width: 630px)' });

  // animations
  const [arrowAni, api] = useSpring(() => ({
    from: { rotateZ: 180 },
  }));

  return (
    <header>
      <div>{isBackArrow && <BackArrow />}</div>
      <div>
        {isSearchBar ? (
          <>
            <input
              type='text'
              placeholder='Wyszukaj polskie słówko'
              value={searchTerm}
              onChange={(e) => {
                setSearchTerm(e.target.value);
              }}
              autoFocus
            />
          </>
        ) : tablet630 ? (
          <svg
            className='radius'
            height='70'
            version='1.1'
            viewBox='0 0 386.29 449.79'
            xmlns='http://www.w3.org/2000/svg'
          >
            <g transform='translate(776.77 206.57)'>
              <path d='m-746.34 243.22h-30.427v-449.79h60.854v449.79zm233.69-.0265-122.17-.0265 13.001-.74939 4.7257-.27273 11.642-1.0647 9.7896-1.3181 7.9375-1.3318 10.449-2.1082 10.718-2.6524 8.4667-2.3854 11.377-3.7363 10.521-3.9522 9.2732-3.9521 9.5742-4.4824 10.319-5.4731 7.1438-4.1225 6.35-3.953 8.7312-5.8337 3.9688-2.907 3.9688-2.907 8.7312-6.9967 3.3661-2.9468 3.3661-2.9468 8.5705-8.0707 4.2273-4.4979 4.2273-4.4979 7.1718-8.3528 6.2602-8.0514 6.5498-9.2604 5.8084-9.2604 4.1109-7.1438 5.1819-10.054 4.0421-8.9958 4.0022-10.054 1.9277-5.8208 1.9277-5.8208 2.8861-10.583 1.0883-5.0712 1.0882-5.0712.78029-4.7184.78028-4.7184.10999-.66145.10996-.66146.036 98.756.036 98.756-122.17-.0265zm-138.91-59.884-.8599.13854v-330.25l1.7198.27706 7.4083.83851 10.781 1.5763 8.7979 1.5968 12.965 2.8744 10.893 2.8914 11.457 3.4644 9.9293 3.4769 12.47 4.9539 9.4905 4.3324 8.8794 4.4445 8.3185 4.5656 7.1438 4.2328 9.7896 6.4664 8.7312 6.5045 5.2917 4.2575 7.138 6.1091 8.4003 8.2021 2.5958 2.9104 2.5958 2.9104 4.8534 5.8208 5.9503 7.9375 2.1219 3.1784 2.1219 3.1784 4.3483 7.4015 5.7391 11.642 3.0209 7.6729 2.3337 7.1437 2.0843 7.9375 1.2995 6.3914.42272 3.022.42275 3.022.38635 4.3656.38637 4.3656v10.319l-.38637 4.3656-.38635 4.3656-.42275 3.022-.42272 3.022-1.2995 6.3914-2.0843 7.9375-1.1668 3.5719-1.1668 3.5719-3.0209 7.6729-5.7391 11.642-4.3483 7.4015-2.1219 3.1784-2.1219 3.1784-5.9503 7.9375-4.8534 5.8208-2.5958 2.9104-2.5958 2.9104-8.4003 8.2021-7.138 6.1091-2.6458 2.1265-2.6458 2.1264-3.7042 2.7565-3.7042 2.7565-2.9104 2.1006-8.2021 5.3465-7.1438 4.2483-8.3185 4.5656-8.8794 4.4445-9.4905 4.3324-6.235 2.477-6.235 2.477-9.9293 3.4769-11.457 3.4644-10.893 2.8914-12.965 2.8744-8.7979 1.5968-10.781 1.5763-7.4083.83851zm60.457-69.883.99219-.1718 6.35-1.571 6.6146-2.1358 3.3073-1.3118 3.3073-1.3118 3.7042-1.8485 3.7042-1.8485 6.7557-4.0589 3.2747-2.3882 3.2747-2.3882 6.322-5.4042 6.5811-6.7927 5.2834-6.5885 2.1435-3.175 2.1435-3.175 3.0178-5.2386 1.2847-2.56 1.2847-2.56 1.1764-2.7582 1.1764-2.7582.94667-2.6458.94665-2.6458 1.6399-5.8208.23162-.52916.23163-.52917.26564-1.8521.67421-3.6133.67422-3.6133.4126-3.9273.41261-3.9273v-11.906l-.41261-3.9273-.4126-3.9273-.66275-3.6133-.66274-3.6133-.91976-3.4845-.91975-3.4845-2.1512-6.2602-2.642-6.2996-2.5746-5.1305-3.0178-5.2386-2.1435-3.175-2.1435-3.175-2.6417-3.2942-2.6417-3.2943-3.2906-3.3963-3.2906-3.3963-6.322-5.4042-6.5494-4.7764-6.7557-4.0589-7.4083-3.697-6.6146-2.6236-6.7471-2.1817-7.5126-1.8447h-.68925v190.52l.99219-.17179zm200.49-122.62h-.13229v-1.2006l-1.5929-9.4496-2.1716-10.12-2.8861-10.583-3.8554-11.642-4.0022-10.054-4.0421-8.9958-5.1819-10.054-4.1109-7.1437-5.8084-9.2604-6.5498-9.2604-6.2602-8.0514-7.1718-8.3528-4.2273-4.4979-4.2273-4.4979-8.5705-8.0707-6.7321-5.8936-8.7312-6.9967-7.9375-5.814-8.7312-5.8337-6.35-3.9529-7.1438-4.1226-10.319-5.473-9.5742-4.4824-9.2732-3.9521-10.521-3.9523-11.377-3.7363-8.4667-2.3854-10.718-2.6524-10.449-2.1082-7.9375-1.3318-9.7896-1.3181-11.642-1.0648-9.4514-.54545-6.159-.46723 242.23-.0618v197.38z' />
            </g>
          </svg>
        ) : (
          <>
            <h1>Dictionair</h1>
            <h4>by VoyTech</h4>
          </>
        )}
      </div>
      <div>
        <button
          onClick={() => {
            setStatsSwitch(!statsSwitch);
            if (!statsSwitch) {
              api.start({
                rotateZ: 270,
              });
            } else {
              api.start({
                rotateZ: 180,
              });
            }
          }}
        >
          {tablet760 ? (
            <svg
              width='25'
              height='25'
              version='1.1'
              viewBox='0 0 50 50'
              xmlns='http://www.w3.org/2000/svg'
            >
              <g>
                <path
                  transform='scale(.26458)'
                  d='m8.3672 0c-4.3768.25096-7.9569 5.5177-8.3672 12.311v12.74c.39248 7.0322 3.8167 12.484 8.0039 12.744h172.97c4.1878-.2598 7.6133-5.7119 8.0059-12.744v-12.307c-.39248-7.0322-3.8167-12.484-8.0039-12.744z'
                  strokeWidth='4'
                />
                <path
                  d='m2.2138 20c-1.158.0664-2.1053 1.4599-2.2138 3.2572v3.3709c.10384 1.8606 1.0098 3.3031 2.1177 3.3719h45.764c1.108-.06874 2.0144-1.5113 2.1182-3.3719v-3.2561c-.10384-1.8606-1.0098-3.3031-2.1177-3.3719z'
                  strokeWidth='1.0583'
                />
                <path
                  d='m2.2138 40c-1.158.0664-2.1053 1.4599-2.2138 3.2572v3.3709c.10384 1.8606 1.0098 3.3031 2.1177 3.3719h45.764c1.108-.06874 2.0144-1.5113 2.1182-3.3719v-3.2561c-.10384-1.8606-1.0098-3.3031-2.1177-3.3719z'
                  strokeWidth='1.0583'
                />
              </g>
            </svg>
          ) : (
            <>
              <h1>Statystyki</h1>
              <animated.svg
                style={arrowAni}
                width='32'
                height='32'
                version='1.1'
                viewBox='0 0 28.176 52.917'
                xmlns='http://www.w3.org/2000/svg'
              >
                <g transform='translate(-60.738 -80.501)'>
                  <path
                    d='m88.053 133.42h-.86089l-26.454-26.458 26.454-26.458h1.7218v1.7177l-24.736 24.741 24.736 24.741v1.7177z'
                    strokeWidth='.26458'
                  />
                </g>
              </animated.svg>
            </>
          )}
        </button>
      </div>
    </header>
  );
};

export default Header;
